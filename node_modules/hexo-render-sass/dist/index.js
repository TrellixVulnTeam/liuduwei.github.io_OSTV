"use strict";
var __importDefault =
  (this && this.__importDefault) ||
  function (mod) {
    return mod && mod.__esModule ? mod : { default: mod };
  };
Object.defineProperty(exports, "__esModule", { value: true });
//  I M P O R T S
var graceful_fs_1 = __importDefault(require("graceful-fs"));
var node_sass_1 = __importDefault(require("node-sass"));
//  P R O G R A M
var renderer = function (data, options, callback) {
  var cssOutputFile = "./public/css/style.css";
  node_sass_1.default.render(
    {
      file: data.path,
      outputStyle: "compressed",
      outFile: cssOutputFile
    },
    function (err, result) {
      if (!err) {
        graceful_fs_1.default.writeFile(cssOutputFile, result.css, function (
          err
        ) {
          if (err) {
            console.log(err);
            return;
          }
          console.log("Generated: " + cssOutputFile);
          return;
        });
      } else {
        console.log(err);
      }
      callback(null, result.css.toString());
    }
  );
};
//  E X P O R T S
hexo.extend.renderer.register("scss", "css", renderer);
hexo.extend.renderer.register("sass", "css", renderer);
